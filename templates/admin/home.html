{% extends 'admin/base.html' %}
{% load static %}
{% block main_content %}
<section class="content">
  <div class="container-fluid">
    <!-- Small boxes (Stat box) -->
    <div class="row">
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <a href="{% url 'managestaff' %}">
        <div class="small-box bg-info">
          <div class="inner">
            <h3>{{ staff_count }}</h3>

            <p>Total Staff</p>
          </div>
          <div class="icon">
            <i class="ion ion-android-person"></i>
          </div>

        </div>
        </a>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <a href="{% url 'managecourse' %}">
        <div class="small-box bg-success">
          <div class="inner">
            <h3>{{ course_count }}</h3>

            <p>Total Course</p>
          </div>
          <div class="icon">
            <i class="ion ion-ios-book"></i>
          </div>

        </div>
        </a>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
          <a href="{% url 'managesubject' %}">
        <!-- small box -->
        <div class="small-box bg-warning">
          <div class="inner">
            <h3>{{ subject_count }}</h3>

            <p>Total Subject</p>
          </div>
          <div class="icon">
            <i class="ion ion-ios-book"></i>
          </div>

        </div>
        </a>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <a href="{% url 'managestudent' %}">
        <div class="small-box bg-danger">
          <div class="inner">
            <h3>{{ student_count }}</h3>

            <p>Total Student</p>
          </div>
          <div class="icon">
            <i class="ion ion-android-person"></i>
          </div>

        </div>
        </a>
      </div>
      <!-- ./col -->
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="card card-primary">
                <div class="card-header">
                  <h3 class="card-title">Staff and Student Chart</h3>

                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
        </div>
        <div class="col-lg-6">
            <div class="card card-primary">
              <div class="card-header">
                <h3 class="card-title">Total Subject in Each Course </h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                <canvas id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 487px;" width="487" height="250" class="chartjs-render-monitor"></canvas>
              </div>
              <!-- /.card-body -->
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="card card-primary">
                <div class="card-header">
                  <h3 class="card-title">Total Student in Each Course</h3>

                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="pieChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
        </div>
        <div class="col-lg-6">
            <div class="card card-primary">
                <div class="card-header">
                  <h3 class="card-title">Total Student in Each Subject</h3>

                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="pieChart3" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
                <!-- /.card-body -->
              </div>
              <!-- /.card -->
        </div>
    </div>
    <div class="row">
             <div class="col-lg-6">
                 <div class="card card-success">
                 <div class="card-header">
                   <h3 class="card-title">Staff Leaves vs Attendance</h3>

                   <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                   </div>
                 </div>
                 <div class="card-body">
                   <div class="chart">
                     <canvas id="barChart1" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                   </div>
                 </div>
                 <!-- /.card-body -->
               </div>
             </div>
             <div class="col-lg-6">
                  <div class="card card-success">
                  <div class="card-header">
                    <h3 class="card-title">Student Leaves vs Attendance</h3>

                    <div class="card-tools">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                      </button>
                      <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="chart">
                      <canvas id="barChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                  </div>
                  <!-- /.card-body -->
                </div>
              </div>
         </div>
    <!-- /.row (main row) -->
  </div><!-- /.container-fluid -->
</section>
{% endblock main_content %}
{% block custom_js %}

<script>
    $(document).ready(function(){
            //pie Chart for Student and Staff
            var pieData  = {
             labels: [
                 'Staff',
                 'Student'
             ],
             datasets: [
               {
                 data: [{{ staff_count }},{{ student_count }}],
                 backgroundColor : ['#17a2b8', '#dc3545'],
               }
             ]
           }
           var pieChartCanvas = $('#pieChart').get(0).getContext('2d')
           var pieOptions     = {
             maintainAspectRatio : false,
             responsive : true,
           }

            //Create pie or douhnut chart
            // You can switch between pie and douhnut using the method below.
            var pieChart = new Chart(pieChartCanvas, {
              type: 'pie',
              data: pieData,
              options: pieOptions
            });
            //Second Chart for Total Subject in Each Course
                var subject_count_list={{ subject_count_list }};
                var course_name_list={{ course_name_list|safe }};
                var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
                var donutData        = {
                  labels:course_name_list,
                  datasets: [
                    {
                      data: subject_count_list,
                      backgroundColor : ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc', '#d2d6de'],
                    }
                  ]
                }
                var donutOptions     = {
                  maintainAspectRatio : false,
                  responsive : true,
                }
                //Create pie or douhnut chart
                // You can switch between pie and douhnut using the method below.
                var donutChart = new Chart(donutChartCanvas, {
                  type: 'doughnut',
                  data: donutData,
                  options: donutOptions
                });
                //Pie Chart for total Student in Each Course
                var student_in_course={{ student_in_course }};
                var pieData2  = {
                 labels: course_name_list,
                 datasets: [
                   {
                     data: student_in_course,
                     backgroundColor : ['#FDB0C0', '#ED0DD9','#FDDC5C','#9900FA','#017374','#26F7FD'],
                   }
                 ]
               }
               var pieChartCanvas2 = $('#pieChart2').get(0).getContext('2d')
               var pieOptions2     = {
                 maintainAspectRatio : false,
                 responsive : true,
               }

                //Create pie or douhnut chart
                // You can switch between pie and douhnut using the method below.
                var pieChart = new Chart(pieChartCanvas2, {
                  type: 'pie',
                  data: pieData2,
                  options: pieOptions2
                });
                //Pie Chart for total Student in Each Subject
                var student_in_subject={{ student_in_subject }};
                var subject_list={{ subject_list|safe }};
                var pieData3  = {
                 labels: subject_list,
                 datasets: [
                   {
                     data: student_in_subject,
                     backgroundColor : ['#FDB0C0', '#ED0DD9','#FDDC5C','#9900FA','#017374','#26F7FD'],
                   }
                 ]
               }
               var pieChartCanvas3 = $('#pieChart3').get(0).getContext('2d')
               var pieOptions3     = {
                 maintainAspectRatio : false,
                 responsive : true,
               }

                //Create pie or douhnut chart
                // You can switch between pie and douhnut using the method below.
                var pieChart = new Chart(pieChartCanvas3, {
                  type: 'pie',
                  data: pieData3,
                  options: pieOptions3
                });

                ///Staff Leave vs Attendance Bar Chart
                       var attendance_present_list_staff={{ attendance_present_list_staff }};
                       var attendance_absent_list_staff={{ attendance_absent_list_staff }};
                       var staff_name_list={{ staff_name_list|safe }};
                       var barChartData = {
                         labels  : staff_name_list,
                         datasets: [
                           {
                             label               : 'Leaves',
                             backgroundColor     : 'rgba(60,141,188,0.9)',
                             borderColor         : 'rgba(60,141,188,0.8)',
                             pointRadius          : false,
                             pointColor          : '#3b8bba',
                             pointStrokeColor    : 'rgba(60,141,188,1)',
                             pointHighlightFill  : '#fff',
                             pointHighlightStroke: 'rgba(60,141,188,1)',
                             data                : attendance_absent_list_staff
                           },
                           {
                             label               : 'Attendance',
                             backgroundColor     : 'rgba(210, 214, 222, 1)',
                             borderColor         : 'rgba(210, 214, 222, 1)',
                             pointRadius         : false,
                             pointColor          : 'rgba(210, 214, 222, 1)',
                             pointStrokeColor    : '#c1c7d1',
                             pointHighlightFill  : '#fff',
                             pointHighlightStroke: 'rgba(220,220,220,1)',
                             data                : attendance_present_list_staff
                           },
                         ]
                       }
                       var barChartCanvas = $('#barChart1').get(0).getContext('2d')
                       var temp0 = barChartData.datasets[0]
                       var temp1 = barChartData.datasets[1]
                       barChartData.datasets[0] = temp1
                       barChartData.datasets[1] = temp0

                       var barChartOptions = {
                         responsive              : true,
                         maintainAspectRatio     : false,
                         datasetFill             : false
                       }

                       var barChart = new Chart(barChartCanvas, {
                         type: 'bar',
                         data: barChartData,
                         options: barChartOptions
                     });

                       //Student Leaves vs Attendance
                       var attendance_present_list_student={{ attendance_present_list_student }};
                       var attendance_absent_list_student={{ attendance_absent_list_student }};
                       var student_name_list={{ student_name_list|safe }};
                       var barChartData2 = {
                         labels  : student_name_list,
                         datasets: [
                           {
                             label               : 'Leaves',
                             backgroundColor     : 'rgba(60,141,188,0.9)',
                             borderColor         : 'rgba(60,141,188,0.8)',
                             pointRadius          : false,
                             pointColor          : '#3b8bba',
                             pointStrokeColor    : 'rgba(60,141,188,1)',
                             pointHighlightFill  : '#fff',
                             pointHighlightStroke: 'rgba(60,141,188,1)',
                             data                : attendance_absent_list_student
                           },
                           {
                             label               : 'Attendance',
                             backgroundColor     : 'rgba(210, 214, 222, 1)',
                             borderColor         : 'rgba(210, 214, 222, 1)',
                             pointRadius         : false,
                             pointColor          : 'rgba(210, 214, 222, 1)',
                             pointStrokeColor    : '#c1c7d1',
                             pointHighlightFill  : '#fff',
                             pointHighlightStroke: 'rgba(220,220,220,1)',
                             data                : attendance_present_list_student
                           },
                         ]
                       }
                       var barChartCanvas2 = $('#barChart2').get(0).getContext('2d')
                       var temp02 = barChartData2.datasets[0]
                       var temp12 = barChartData2.datasets[1]
                       barChartData2.datasets[0] = temp12
                       barChartData2.datasets[1] = temp02

                       var barChartOptions2 = {
                         responsive              : true,
                         maintainAspectRatio     : false,
                         datasetFill             : false
                       }

                       var barChart2 = new Chart(barChartCanvas2, {
                         type: 'bar',
                         data: barChartData2,
                         options: barChartOptions2
                     });


    });
</script>
{% endblock custom_js %}
